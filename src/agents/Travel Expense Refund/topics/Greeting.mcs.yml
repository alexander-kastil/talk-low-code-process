# Name: Greeting
# This topic is triggered when the user greets the agent.
kind: AdaptiveDialog
beginDialog:
  kind: OnRecognizedIntent
  id: main
  intent:
    displayName: Greeting
    includeInOnSelectIntent: false
    triggerQueries:
      - Good afternoon
      - Good morning
      - Hello
      - Hey
      - Hi

  actions:
    - kind: Question
      id: question_VsSmGD
      interruptionPolicy:
        allowInterruption: true

      variable: init:Topic.employeeNumber
      prompt: What is your employee number?
      entity: NumberPrebuiltEntity

    - kind: Question
      id: question_WUQFj0
      interruptionPolicy:
        allowInterruption: true

      variable: init:Topic.userName
      prompt: What is your name?
      entity: StringPrebuiltEntity

    - kind: Question
      id: question_M9swET
      interruptionPolicy:
        allowInterruption: true

      variable: init:Topic.correctNumber
      prompt: Can you confirm that your employee number is {Topic.employeeNumber}
      entity:
        kind: EmbeddedEntity
        definition:
          kind: ClosedListEntity
          items:
            - id: Yes
              displayName: Yes

            - id: No
              displayName: No

        displayName: EmbeddedEntity-7yy18Q

    - kind: ConditionGroup
      id: conditionGroup_pSN039
      conditions:
        - id: conditionItem_yp1fSe
          condition: =Topic.correctNumber = 'cr915_expensepilot.topic.Greeting.main.question_M9swET'.Yes
          actions:
            - kind: SetVariable
              id: setVariable_LBMU16
              variable: System.User.Language
              value:
                kind: OptionDataValue
                type:
                  kind: SystemOptionSet
                  name: Locale

                value: English

      elseActions:
        - kind: EndConversation
          id: ciolmJ

inputType: {}
outputType:
  properties:
    employeeNumber:
      displayName: employeeNumber
      type: Number